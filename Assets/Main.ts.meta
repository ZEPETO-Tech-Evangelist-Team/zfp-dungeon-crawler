fileFormatVersion: 2
guid: 3fdb0066623387147a8febf0af0e5a98
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    ZEPETO_Character_Controller_1 = require(\"ZEPETO.Character.Controller\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst Configs_1 = require(\"./Scripts/Configs\");\r\nconst
    LevelManager_1 = require(\"./Scripts/LevelManager\");\r\nconst ZEPETO_World_1
    = require(\"ZEPETO.World\");\r\nconst EnemyComponent_1 = require(\"./Scripts/EnemyComponent\");\r\nconst
    HealthComponent_1 = require(\"./Scripts/HealthComponent\");\r\nconst TMPro_1
    = require(\"TMPro\");\r\nclass Main extends ZEPETO_Script_1.ZepetoScriptBehaviour
    {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.Configs
    = null;\r\n        this.LevelManager = null;\r\n        this.CurrentLevel = null;\r\n       
    this.LocalPlayer = null;\r\n        this.ZepetoCamera = null;\r\n        this._gameState
    = null;\r\n        this.SuccessWinGO = null;\r\n        this.LoseWinGO = null;\r\n   
    }\r\n    ShowSuccessWin() {\r\n        this.SuccessWinGO.SetActive(true);\r\n   
    }\r\n    HideSuccessWin() {\r\n        this.SuccessWinGO.SetActive(false);\r\n       
    this.LevelManager.RestartGame();\r\n    }\r\n    ShowLoseWin() {\r\n        this.LoseWinGO.SetActive(true);\r\n   
    }\r\n    HideLoseWin() {\r\n        this.LoseWinGO.SetActive(false);\r\n       
    this.LevelManager.RestartGame();\r\n    }\r\n    static GetInstance() {\r\n       
    if (Main.instance == undefined) {\r\n            Main.instance = UnityEngine_1.GameObject.Find(\"Main\").GetComponent($typeof(Main));\r\n       
    }\r\n        return this.instance;\r\n    }\r\n    Awake() {\r\n        Main.instance
    = this;\r\n    }\r\n    Start() {\r\n        this._gameState = Configs_1.GameState.LOADING;\r\n       
    this.Configs = new Configs_1.default();\r\n        this.LevelManager = UnityEngine_1.GameObject.Find(\"LevelManager\").GetComponent($typeof(LevelManager_1.default));\r\n       
    this.CurrentLevel = 0;\r\n        this.LoadLocalPlayer();\r\n    }\r\n    Update()
    {\r\n        this.RunStateMachine();\r\n    }\r\n    RunStateMachine() {\r\n       
    switch (this._gameState) {\r\n            case Configs_1.GameState.NONE:\r\n               
    this._gameState = Configs_1.GameState.LOADING;\r\n                break;\r\n           
    case Configs_1.GameState.LOADING:\r\n                break;\r\n            case
    Configs_1.GameState.START_FIGHTING:\r\n                this.LevelManager.CustomStart();\r\n               
    this._gameState = Configs_1.GameState.CONTINUE_FIGHTING;\r\n                break;\r\n           
    case Configs_1.GameState.CONTINUE_FIGHTING:\r\n                this.LevelManager.CustomUpdate();\r\n               
    break;\r\n            case Configs_1.GameState.END_FIGHTING:\r\n               
    this.CurrentLevel++;\r\n                UnityEngine_1.Debug.LogError(\"COUNT:
    \" + this.CurrentLevel);\r\n                UnityEngine_1.Debug.LogError(this.Configs.Levels.length);\r\n               
    if (this.CurrentLevel >= this.Configs.Levels.length) {\r\n                   
    this._gameState = Configs_1.GameState.COMPLETE_GAME;\r\n                }\r\n               
    else {\r\n                    this._gameState = Configs_1.GameState.START_FIGHTING;\r\n               
    }\r\n                break;\r\n            case Configs_1.GameState.COMPLETE_GAME:\r\n               
    this.ShowSuccessWin();\r\n                UnityEngine_1.Debug.LogError(\"GAME
    END !!!!!\");\r\n                break;\r\n            //=====================================================================\r\n           
    case Configs_1.GameState.START_UPGRADE_SELECT:\r\n                this._gameState
    = Configs_1.GameState.CONTINUE_UPGRADE_SELECT;\r\n                break;\r\n           
    case Configs_1.GameState.CONTINUE_UPGRADE_SELECT:\r\n                break;\r\n           
    case Configs_1.GameState.END_UPGRADE_SELECT:\r\n                this._gameState
    = Configs_1.GameState.START_FIGHTING;\r\n                break;\r\n           
    //=====================================================================\r\n       
    }\r\n        //console.log(`State: ${GameState[this._gameState]}` );\r\n    }\r\n   
    SetGameState(gameState) {\r\n        this._gameState = gameState;\r\n    }\r\n   
    LoadLocalPlayer() {\r\n        // Grab the user id specified from logging into
    zepeto through the editor. \r\n        $extension(\"ZEPETO.Character.Controller.ZepetoPlayersExtension\").CreatePlayerWithUserId(ZEPETO_Character_Controller_1.ZepetoPlayers.instance,
    ZEPETO_World_1.WorldService.userId, new ZEPETO_Character_Controller_1.SpawnInfo(),
    true);\r\n        ZEPETO_Character_Controller_1.ZepetoPlayers.instance.OnAddedLocalPlayer.AddListener(()
    => {\r\n            this.LocalPlayer = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer;\r\n           
    this.LocalPlayer.zepetoPlayer.character.gameObject.tag = \"PLAYER\";\r\n           
    const collider = this.LocalPlayer.zepetoPlayer.character.gameObject.AddComponent($typeof(UnityEngine_1.CapsuleCollider));\r\n           
    collider.isTrigger = true;\r\n            collider.height = 2;\r\n           
    const enemyComponent = this.LocalPlayer.zepetoPlayer.character.gameObject.AddComponent($typeof(EnemyComponent_1.default));\r\n           
    enemyComponent.EntityType = Configs_1.EntityType.PLAYER;\r\n            const
    healthComponent = this.LocalPlayer.zepetoPlayer.character.gameObject.AddComponent($typeof(HealthComponent_1.default));\r\n           
    this.SetGameState(Configs_1.GameState.START_FIGHTING);\r\n            const weaponGO
    = UnityEngine_1.GameObject.Instantiate(UnityEngine_1.Resources.Load(\"PlayerWeapon\"),
    this.LocalPlayer.zepetoPlayer.character.gameObject.transform.position, UnityEngine_1.Quaternion.identity);\r\n           
    weaponGO.transform.parent = this.LocalPlayer.zepetoPlayer.character.gameObject.transform;\r\n           
    const healthUIGO = UnityEngine_1.GameObject.Instantiate(UnityEngine_1.Resources.Load(\"HealthUI\"));\r\n           
    healthUIGO.transform.parent = this.LocalPlayer.zepetoPlayer.character.gameObject.transform;\r\n           
    healthUIGO.transform.position = new UnityEngine_1.Vector3(0, 0, 0);\r\n           
    healthComponent.HealthUI = healthUIGO;\r\n            healthComponent.HealthText
    = healthComponent.HealthUI.GetComponentInChildren($typeof(TMPro_1.TextMeshProUGUI));\r\n           
    this.ZepetoCamera = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetComponentInChildren($typeof(UnityEngine_1.Camera));\r\n       
    });\r\n    }\r\n}\r\nexports.default = Main;\r\nMain.instance = null;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw2Q0FBc0g7QUFDdEgsNkVBQW1GO0FBQ25GLGlEQUFxRDtBQUNyRCwrQ0FBbUU7QUFDbkUseURBQWtEO0FBQ2xELCtDQUE0QztBQUM1Qyw2REFBc0Q7QUFDdEQsK0RBQXdEO0FBQ3hELGlDQUF3QztBQUV4QyxNQUFxQixJQUFLLFNBQVEscUNBQXFCO0lBQXZEOztRQUVXLFlBQU8sR0FBYSxJQUFJLENBQUM7UUFDekIsaUJBQVksR0FBa0IsSUFBSSxDQUFDO1FBQ25DLGlCQUFZLEdBQVksSUFBSSxDQUFDO1FBQzdCLGdCQUFXLEdBQWlCLElBQUksQ0FBQztRQUNqQyxpQkFBWSxHQUFZLElBQUksQ0FBQztRQUU1QixlQUFVLEdBQWUsSUFBSSxDQUFDO1FBRS9CLGlCQUFZLEdBQWdCLElBQUksQ0FBQztRQUNqQyxjQUFTLEdBQWdCLElBQUksQ0FBQztJQXVJekMsQ0FBQztJQXJJVSxjQUFjO1FBQ2pCLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFTSxjQUFjO1FBQ2pCLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVNLFdBQVc7UUFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRU0sV0FBVztRQUNkLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDcEMsQ0FBQztJQUVNLE1BQU0sQ0FBQyxXQUFXO1FBRXJCLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxTQUFTLEVB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","assetPath":"Assets/Main.ts","manifest":{"properties":[{"assembly":"","name":"Configs","type":"C:/Users/mondu/OneDrive/Documents/zfp-dungeon-crawler/Assets/Scripts/Configs.default","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"","name":"LevelManager","type":"C:/Users/mondu/OneDrive/Documents/zfp-dungeon-crawler/Assets/Scripts/LevelManager.default","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"CurrentLevel","type":"System.Single","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"ZEPETO.Character.Controller","name":"LocalPlayer","type":"ZEPETO.Character.Controller.LocalPlayer","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"ZepetoCamera","type":"UnityEngine.Camera","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"SuccessWinGO","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"LoseWinGO","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"Main","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: b21c20d56a88f0f6ca8e26fbef50ab19
  onlyWriteTrigger: 0
